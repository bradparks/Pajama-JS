document={};var elemCount=0;document.createElement=function(e){var t=[];var n=[];var r={};var i={tagName:e,elemCount:elemCount++,classList:{add:function(e){n.push(e)},remove:function(e){for(var t=0;t<n.length;t++){if(n[t]==e){n.splice(t,1)}}},contains:function(e){for(var t=0;t<n.length;t++){if(n[t]==e){return true}}return false}},addEventListener:function(e,t){if(!r[e])r[e]=[];r[e].push(t)},appendChild:function(e){t.push(e);e.parentNode=i},removeChild:function(e){for(var n=0;n<t.length;n++){if(t[n]==e){t.splice(n,1);break}}},childNodes:t,dispatchEvent:function(e){if(r[e.type]){for(var t=0;t<r[e.type].length;t++){r[e.type][t].call({},{})}}if(this.parentNode){this.parentNode.dispatchEvent(e)}},parentNode:null,setAttribute:function(e,t){this[e]=t}};return i};document.createEvent=function(){return{type:"",initEvent:function(e,t,n){this.type=e}}};function PjsDataBindingRequest(e,t,n){this.element=e;this.attr=t;this.func=n}function PjsBindProperty(e,t,n,r){if(!e.hasOwnProperty(t)){e[t]=""}if(e[t]instanceof Function){r.addEvent(n,function(i){e[t].call(e,r.getAttr(n),i)});return}if(!Object.getOwnPropertyDescriptor(e,t).hasOwnProperty("get")){var i=e[t];var a=[];Object.defineProperty(e,t,{get:function(){return i},set:function(n){if(n instanceof PjsDataBindingRequest){if(n.func){a.push(n.rowGenerator)}else if(n.attr instanceof Function){a.push(n.attr)}else{a.push(function(){n.element.setAttr(n.attr,i)});n.element.setAttr(n.attr,i);n.element.addEvent("change",function(r){e[t]=n.element.getAttr(n.attr)});n.element.addEvent("keyup",function(r){if(n.element.getAttr(n.attr)!=i){e[t]=n.element.getAttr(n.attr)}})}n.element.addClass("pjs.bind."+t)}else{i=n;for(var o=0;o<a.length;o++){a[o].call(r,i)}}},enumerable:true})}e[t]=new PjsDataBindingRequest(r,n)}function PjsBindArray(e,t,n,r){if(!e.hasOwnProperty(t)){e[t]=[]}if(!Object.getOwnPropertyDescriptor(e,t).hasOwnProperty("get")){var i=e[t];var a=[];Object.defineProperty(e,t,{get:function(){var n=i.concat([]);Object.defineProperty(n,"pop",{value:function(){var e=i.pop();for(var t=0;t<a.length;t++){var n=a[t].element.getNodes();n[n.length-1].remove()}return e}});Object.defineProperty(n,"push",{value:function(){var e=i.push.apply(i,Array.prototype.slice.call(arguments));for(var t=0;t<a.length;t++){var n=a[t];n.element.append(n.func.call({},arguments[0]))}return e}});Object.defineProperty(n,"reverse",{value:function(){var n=i.reverse();e[t]=i;return n}});Object.defineProperty(n,"shift",{value:function(){var e=i.shift();for(var t=0;t<a.length;t++){var n=a[t].element.getNodes();n[0].remove()}return e}});Object.defineProperty(n,"sort",{value:function(){var n=i.sort.apply(i,Array.prototype.slice.call(arguments));e[t]=i;return n}});Object.defineProperty(n,"splice",{value:function(){var n=i.splice.apply(i,Array.prototype.slice.call(arguments));e[t]=i;return n}});Object.defineProperty(n,"unshift",{value:function(){var e=i.unshift.apply(i,Array.prototype.slice.call(arguments));for(var t=0;t<a.length;t++){var n=a[t];n.element.prepend(n.func.call({},arguments[0]))}return e}});return n},set:function(n){if(n instanceof PjsDataBindingRequest){a.push({element:n.element,func:n.func})}else{i=n}for(var r=0;r<a.length;r++){var o=a[r];o.element.clear();for(var s in i){o.element.append(o.func.call({},e[t][s]))}}},enumerable:true})}e[t]=new PjsDataBindingRequest(n,null,r)}function PjsElement(e){if(!e)e={};if(!e.tag)e.tag="div";var t=document.createElement(e.tag);var n=this;n.dom=t;n.eventList=[];t._view=n;n.prepend=function(e){if(e instanceof PjsElement){n.dom.insertBefore(e.dom,n.dom.firstChild)}else{n.prepend(new PjsElement(e))}};n.append=function(e){var t=e;if(!(t instanceof Array))t=Array.prototype.slice.call(arguments);for(var r=0;r<t.length;r++){var i=t[r];if(i instanceof PjsElement){n.dom.appendChild(i.dom)}else{n.append(new PjsElement(i))}}};n.remove=function(){n.dom.parentNode.removeChild(n.dom)};n.addClass=function(e){if(e!=""){n.dom.className+=" "+e}};n.removeClass=function(e){if(e!=""){n.dom.className=(" "+n.dom.className+" ").replace(" "+e+" ","")}};n.hasClass=function(e){return(" "+n.dom.className+" ").indexOf(" "+e+" ")!=-1};n.setAttr=function(e,t){n.dom[e]=t;n.dom.setAttribute(e,t)};n.getAttr=function(e){return n.dom[e]};n.addEvent=function(e,t){n.dom.addEventListener(e,t);if(n.eventList.indexOf(e)==-1)n.eventList.push(e)};n.showHide=function(){n.dom.style.display!="none"?n.hide():n.show()};n.show=function(){n.dom.style.display="block"};n.hide=function(){n.dom.style.display="none"};n.setValue=function(e){if(["input","select"].indexOf(n.dom.tagName.toLowerCase())!=-1){n.dom.value=e}else{n.dom.innerHTML=e}};n.getValue=function(){return n.dom.value||n.dom.innerHTML};n.clear=function(){var e=n.dom.childNodes.length;for(var t=0;t<e;t++){n.dom.removeChild(n.dom.childNodes[0])}return n};n.fireEvent=function(e){var t=document.createEvent("HTMLEvents");t.initEvent(e,true,true);n.dom.dispatchEvent(t);return n};n.getNodes=function(){var e=[];for(var t=0;t<n.dom.childNodes.length;t++){e.push(n.dom.childNodes[t]._view)}return e};n.toMarkup=function(){var e="<"+n.dom.tagName;for(var t in n.dom){if(["tagName","elemCount","classList","addEventListener","appendChild","removeChild","childNodes","dispatchEvent","_view","parentNode"].indexOf(t)<0){if(typeof n.dom[t]=="string"){e+=" "+t+'="'+n.dom[t]+'"'}}}e+=">";if(n.dom.innerHTML){e+=n.dom.innerHTML}for(var r in n.dom.childNodes){e+=n.dom.childNodes[r]._view.toMarkup()}return e+"</"+n.dom.tagName+">"};if(e.classes){for(var r=0;r<e.classes.length;r++){n.addClass(e.classes[r])}}if(e.contains){var i=e.contains;if(i instanceof Object&&Object.keys(i).length==1&&e.forEach){var a=Object.keys(i)[0];PjsBindArray(i[a],a,n,e.forEach)}else{if(!(i instanceof Array))i=[i];for(var r=0;r<i.length;r++){n.append(i[r])}}}for(var r in e){if(r!="classes"&&r!="contains"&&r!="tag"&&r!="forEach"){var o=e[r];if(o instanceof Object&&Object.keys(o).length==1){var a=Object.keys(o)[0];PjsBindProperty(o[a],a,r,n)}else if(o instanceof Object&&r=="className"){var s=Object.keys(o);for(var c in s){!function(e){var t=o[e][e];n.addClass(t);PjsBindProperty(o[e],e,function(e){if(e!=t){n.removeClass(t);n.addClass(e);t=e}},n)}(s[c])}}else{n.setAttr(r,e[r])}}}}var mvc={};var bits=["model","view"];for(var i=0;i<bits.length;i++){!function(e){mvc[e]={__pjsDefine:function(t,n){if(mvc[e].hasOwnProperty(t)){console.log("Duplicate definition found for "+e,t);return}mvc[e][t]=n},__pjsCreate:function(t,n){if(!mvc[e].hasOwnProperty(t)){console.error("Dynamic script loader failed to find "+e+":",t);return null}var n=Array.prototype.slice.call(arguments);n.shift();var r={};if(e=="view")r=new PjsElement({classes:["view."+t]});mvc[e][t].apply(r,n);return r}}}(bits[i])}module.exports={defineModel:mvc.model.__pjsDefine,defineView:mvc.view.__pjsDefine,element:PjsElement,model:mvc.model.__pjsCreate,view:mvc.view.__pjsCreate};